#:import math math
#:import utils kivy.utils
#:include debug.kv

<StrategyGame>:
    id: _game
    main_map: _main_map
    map_rows: 30
    map_cols: 10
    BoxLayout:
        orientation: 'horizontal'
        BoxLayout:
            orientation: 'vertical'
            size_hint: .75, 1
            GridLayout:
                id: _main_map
                game: _game
                cols: root.map_cols
                size_hint: 1, .5
            BoxLayout:
                orientation: 'horizontal'
                size_hint: 1, .5
                HexagonBackdrop:
                    DebugLabel:
                        text: '1'
                HexagonBackdrop:
                    DebugLabel:
                        text: '2'
        BoxLayout:
            orientation: 'vertical'
            size_hint: .25, 1
            Label:
                id: _stats
                text: 'status'
                size_hint: 1, .66
                canvas.before:
                    Color:
                        rgba: .49, .49, .81, 1
                    Rectangle:
                        pos: _stats.pos
                        size: _stats.size
            Button:
                text: 'mini-map'
                size_hint: 1, .33
                background_color: .75, .71, .99, 1


<BU>:
    canvas:
        Color:
            rgba: (1,1,1,1)
        Line:
            points: (self.x, self.y, self.right, self.top)
            width: 2
<TD>:
    canvas:
        Color:
            rgba: (1,1,1,1)
        Line:
            points: (self.x, self.top, self.right, self.y)
            width: 2
<L>:
    canvas:
        Color:
            rgba: (1,1,1,1)
        Line:
            points: (self.x, self.y, self.x, self.top)
            width: 2
<R>:
    canvas:
        Color:
            rgba: (1,1,1,1)
        Line:
            points: (self.right, self.y, self.right, self.top)
            width: 2

<HexMapCell>:
    size_hint: 1, None
    height: self.width / math.sqrt(3)


<HexagonBackdrop@Label>:
    size_hint: 1, None
    canvas.after:
        Color:
            rgba: 0.67, 0.8, 0.94, 1
        Ellipse:
            segments: 6
            pos: self.pos
        Color:
            rgba: utils.get_color_from_hex('#FF0000')
        Ellipse:
            segments: 3
            angle_start: 0
            angle_end: 180
            pos: self.pos
